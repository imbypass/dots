#!/bin/bash
source harmony-color-codes

case "$1" in
    "")
        exit 1
    ;;
    "all")
        harmony-reload "gtk"
        harmony-reload "hypr"
        harmony-reload "ignis"
        harmony-reload "walker"
        harmony-reload "spotify"
        harmony-reload "steam"
        harmony-reload "nautilus"
    ;;
    "bongocat")

        killall -9 bongocat > /dev/null 2>&1
        ~/.local/bin/bongocat & disown
        harmony-reload "waybar"
    ;;
    "waybar")
        if [ "$2" = "full" ]; then

            killall -9 waybar > /dev/null 2>&1
            waybar > /dev/null 2>&1 &
            disown
        else

            killall -USR2 waybar > /dev/null 2>&1
        fi
    ;;
    "walker")
        killall -9 walker > /dev/null 2>&1
        walker --gapplication-service > /dev/null 2>&1 & disown
    ;;
    "nautilus")

        nautilus -q > /dev/null 2>&1 & disown
    ;;
    "mako")

        sleep .5 && makoctl reload > /dev/null 2>&1
    ;;
    "hypr")

        hyprctl reload > /dev/null 2>&1
    ;;
    "swaync")

        swaync-client -rs > /dev/null 2>&1
    ;;
    "ignis")
        exit 0
        killall -9 ignis > /dev/null 2>&1
        ignis init > /dev/null 2>&1 & disown
    ;;
    "ghostty")

        killall -9 ghostty > /dev/null 2>&1
        ghostty \
        --gtk-single-instance=true \
        --quit-after-last-window-closed=false \
        --initial-window=false & disown
    ;;
    "fish")
        source ~/.cache/wal/colors.fish
    ;;
    "mconnect")

        killall -9 mconnect > /dev/null 2>&1
        mconnect -d & disown
    ;;
    "gtk")

        cd ~/.themes/phocus && npm run build > /dev/null 2>&1
        gsettings set org.gnome.desktop.interface gtk-theme phocus_refresh > /dev/null 2>&1
        gsettings set org.gnome.desktop.interface gtk-theme phocus > /dev/null 2>&1
    ;;
    "spotify")

        killall -9 spotify > /dev/null 2>&1
        spicetify apply > /dev/null 2>&1
    ;;
    "pcmanfm")

        killall -9 pcmanfm-qt > /dev/null 2>&1
        pcmanfm-qt --desktop & disown > /dev/null 2>&1
    ;;
    "steam")

        sleep 2 && cd ~/.local/share/adwaita-steam/ && ./install.py \
        --color-theme base16 \
        --extras library/hide_whats_new \
        --font zedmono \
        --custom-css > /dev/null 2>&1
    ;;
    *)
        exit 1
    ;;
esac

echo "ok"
exit 0
